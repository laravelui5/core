sap.ui.define(["sap/ui/model/odata/v4/ODataModel"],function(e){"use strict";return class e{constructor(e){if(e&&typeof e==="string"&&e.trim()!==""){this.serviceUrl=e.replace(/\/$/,"");const t=new URL(e,window.location.origin);this.baseUrl=t.origin;console.info("[Connection] serviceUrl set to "+this.serviceUrl.toString())}else{this.baseUrl=window.location.origin;console.info("[Connection] mainService URI not found in manifest.")}console.info("[Connection] baseUrl set to "+this.baseUrl.toString())}getMainServiceUri(){return this.serviceUrl}getBaseUrl(){return this.baseUrl}getXsrfToken(){const e=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return e?decodeURIComponent(e[1]):null}async fetchGet(e){const t=this.getBaseUrl();const n=String(e).trim().replace(/^\/+/,"");const s=await fetch(`${t}/${n}`,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","X-XSRF-TOKEN":this.getXsrfToken()}});return await this.handleJsonResponse(s)}async fetchXml(e){const t=this.getBaseUrl();const n=String(e).trim().replace(/^\/+/,"");const s=await fetch(`${t}/${n}`,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/xml","X-XSRF-TOKEN":this.getXsrfToken()}});return await this.handleTextResponse(s)}async fetchHtml(e){const t=this.getBaseUrl();const n=String(e).trim().replace(/^\/+/,"");const s=await fetch(`${t}/${n}`,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"text/html","X-XSRF-TOKEN":this.getXsrfToken()}});return await this.handleTextResponse(s)}async fetchPost(e,t){const n=this.getBaseUrl();const s=String(e).trim().replace(/^\/+/,"");const o=await fetch(`${n}/${s}`,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":this.getXsrfToken()},body:JSON.stringify(t)});return await this.handleJsonResponse(o)}async fetchPatch(e,t){const n=this.getBaseUrl();const s=String(e).trim().replace(/^\/+/,"");const o=await fetch(`${n}/${s}`,{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":this.getXsrfToken()},body:JSON.stringify(t)});return await this.handleJsonResponse(o)}async fetchPut(e,t){const n=this.getBaseUrl();const s=String(e).trim().replace(/^\/+/,"");const o=await fetch(`${n}/${s}`,{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":this.getXsrfToken()},body:JSON.stringify(t)});return await this.handleJsonResponse(o)}async fetchDelete(e,t){const n=this.getBaseUrl();const s=String(e).trim().replace(/^\/+/,"");const o=await fetch(`${n}/${s}`,{method:"DELETE",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-XSRF-TOKEN":this.getXsrfToken()},body:t?JSON.stringify(t):undefined});return await this.handleJsonResponse(o)}async fetchEntitySet(e){const t=this.getMainServiceUri();if(!t){throw new Error("[Connection] serviceUrl is not initialized.")}const n=String(e).trim().replace(/^\/+/,"");const s=await fetch(`${t}/${n}`,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"same-origin",headers:{Accept:"application/json","X-XSRF-TOKEN":this.getXsrfToken()}});const o=await this.handleJsonResponse(s);return o.value}async handleJsonResponse(e){let t=null;if(e.status!==204){try{t=await e.json()}catch(e){t=null}}if(!e.ok){const n=new Error(e.statusText);n.status=e.status;n.cause=t;throw n}return t}async handleTextResponse(e){let t=null;if(e.status!==204){try{t=await e.text()}catch(e){t=null}}if(!e.ok){const n=new Error(e.statusText);n.status=e.status;n.cause=t;throw n}return t}}});
//# sourceMappingURL=Connection.js.map